{
    "variables": {
        "box_name": "fedora-20"
    },
    "builders": [{
        "name": "virtualbox",
        "type": "virtualbox-ovf",
        "source_path": "boxes/chef/fedora-20/box.ovf",
        "vm_name": "{{ user `box_name` }}",
        "ssh_username": "vagrant",
        "output_directory": ".tmp/{{ user `box_name` }}",
        "headless": true,
        "ssh_key_path": "misc/vagrant-insecure.pem",
        "ssh_wait_timeout": "1m",
        "shutdown_command": "sudo systemctl poweroff",
        "vboxmanage": [
            ["modifyvm", "{{.Name}}", "--memory", "4096"],
            ["modifyvm", "{{.Name}}", "--cpus", "2"]
        ]
    }, {
        "name": "aws",
        "type": "amazon-ebs",
        "ami_name": "fedora20-{{timestamp}}",
        "source_ami": "ami-21362b48",
        "instance_type": "m3.2xlarge",
        "ami_block_device_mappings": [{
            "device_name": "/dev/sda1",
            "volume_size": 64,
            "delete_on_termination": true
        }],
        "launch_block_device_mappings": [{
            "device_name": "/dev/sda1",
            "volume_size": 64,
            "delete_on_termination": true
        }],
        "ssh_username": "fedora",
        "region": "us-east-1",
        "ami_description": "Fedora 20 provisioned with Vlipco's base box playbook"
    }],
    "provisioners": [{
        "type": "file",
        "source": "ansible",
        "destination": "/tmp/ansible"
    }, {
        "type": "shell",
        "script": "misc/provision"
    }],
    "post-processors": [{
        "type": "vagrant",
        "compression_level": 9,
        "output": "boxes/vlipco/{{ user `box_name` }}.box"
    }]
}