{
  "variables": {
    "box_name": "vlipco-fedora-20"
  },
  "provisioners": [
    {
      "type": "file",
      "source": "ansible",
      "destination": "/tmp/ansible"
    },
    {
      "type": "shell",
      "script": "misc/provision"
    }
  ],
  "post-processors": [
    {
      "type": "vagrant",
      "output": "boxes/vlipco/{{ user `box_name` }}.box",
      "compression_level": 9
    }
  ],
  "builders": [
    {
      "vm_name": "{{ user `box_name` }}",
      "headless": true,
      "output_directory": ".tmp/{{ user `box_name` }}",
      "shutdown_command": "sudo systemctl poweroff",
      "source_path": "boxes/chef/fedora-20/box.ovf",
      "ssh_key_path": "misc/vagrant-insecure.pem",
      "ssh_username": "vagrant",
      "type": "virtualbox-ovf",
      "vboxmanage": [
        [
          "modifyvm",
          "{{.Name}}",
          "--memory",
          4096
        ],
        [
          "modifyvm",
          "{{.Name}}",
          "--cpus",
          2
        ]
      ]
    },
    {
      "type": "digitalocean",
      "snapshot_name": "{{ user `box_name` }}-{{timestamp}}",
      "size": "512mb",
      "region": "nyc2",
      "image": "fedora-20-x64",
      "droplet_name": "{{ user `box_name` }}-{{timestamp}}"
    }
  ]
}
